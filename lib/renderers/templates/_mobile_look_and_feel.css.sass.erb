$header-background-color: <%= render_affiliate_css_property_value(@css_hash, :header_background_color) %>
$header-background-lightness: lightness($header-background-color)

$footer-background-color: <%= render_affiliate_css_property_value(@css_hash, :footer_background_color) %>
$footer-background-lightness: lightness($footer-background-color)
$footer-border-color: if($footer-background-lightness > 50%, darken($footer-background-color, 20%), lighten($footer-background-color, 30%))

$page-background-color: <%= render_affiliate_css_property_value(@css_hash, :page_background_color) %>
$page-background-lightness: lightness($page-background-color)

$navigation-background-color: <%= render_affiliate_css_property_value(@css_hash, :navigation_background_color) %>
$navigation-background-lightness: lightness($navigation-background-color)
$navigation-border-color: if($navigation-background-lightness > 50%, darken($navigation-background-color, 20%), lighten($navigation-background-color, 30%))

body, h1, h2, h3, h4, h5
  font-family: <%= render_affiliate_css_property_value(@css_hash, :font_family) %>

body
  background-color: $page-background-color

#header-wrapper
  background-color: $header-background-color

#header-tagline-wrapper
  background-color: <%= render_affiliate_css_property_value(@css_hash, :header_tagline_background_color) %>
  color: <%= render_affiliate_css_property_value(@css_hash, :header_tagline_color) %>

#header-tagline
  font-family: <%= header_tagline_font_family(@css_hash) %>
  font-size: <%= render_affiliate_css_property_value(@css_hash, :header_tagline_font_size) %>
  font-style: <%= render_affiliate_css_property_value(@css_hash, :header_tagline_font_style) %>

$button-background-color: <%= render_affiliate_css_property_value(@css_hash, :search_button_background_color) %>
$button-background-lightness: lightness($button-background-color)

@if ($header-background-lightness == 100%) and ($navigation-background-lightness == 100%)
  #header-wrapper
    border-bottom: 1px solid #e0e0e0

#commercial-results-search-icon
  background-color: $button-background-color

#advanced-search-button, #custom-date-search-form-search-button
  background-color: $button-background-color

@if $button-background-lightness > 75%
  #search-bar #search-button
    background-image: url(<%= ActionController::Base.helpers.asset_path('bootstrap/glyphicons-halflings.png') %>)
  .commercial-icon
    background-image: url(<%= ActionController::Base.helpers.asset_path('bootstrap/glyphicons-halflings.png') %>)
  #advanced-search-button, #custom-date-search-form-search-button
    color: black
    border-color: #e0e0e0
@else
  .commercial-icon
    background-image: url(<%= ActionController::Base.helpers.asset_path('bootstrap/glyphicons-halflings-white.png') %>)

#menu-button
  color: $button-background-color

#menu-button .icon-bar, #search-bar #search-button
  background-color: $button-background-color

#main-menu
  background-color: <%= render_affiliate_css_property_value(@css_hash, :navigation_background_color) %>

  ul > li > span
    border-left-color: <%= render_affiliate_css_property_value(@css_hash, :left_tab_text_color) %>
    color: <%= render_affiliate_css_property_value(@css_hash, :left_tab_text_color) %>

  li > a
    color: <%= render_affiliate_css_property_value(@css_hash, :navigation_link_color) %>

    &:focus, &:hover, &:visited
      color: <%= render_affiliate_css_property_value(@css_hash, :navigation_link_color) %>

  li.divider
    background-color: $navigation-border-color

@if ($navigation-background-lightness == 100%) and ($page-background-lightness == 100%)
  #navs-filters-facets
    border-bottom: 1px solid #e0e0e0
  #search-nav, #search-filters-and-results-count
    .dropdown-menu
      border-color: #e0e0e0
@else
  #navs-filters-facets
    border-color: $page-background-color
  #search-nav, #search-filters-and-results-count
    .dropdown-menu
      border-color: $navigation-border-color

#search-nav .navbar-nav > li.active span
  border-top-color: <%= render_affiliate_css_property_value(@css_hash, :left_tab_text_color) %>
  color: <%= render_affiliate_css_property_value(@css_hash, :left_tab_text_color) %>

#navs-filters-facets li > a, #footer-wrapper .navbar-nav > li > a, #results-count, #refine-search
  color: <%= render_affiliate_css_property_value(@css_hash, :navigation_link_color) %>

  &:focus, &:hover, &:visited
    color: <%= render_affiliate_css_property_value(@css_hash, :navigation_link_color) %>

#navs-filters-facets
  background-color: $navigation-background-color

#search-nav, #search-filters-and-results-count
  .navbar-nav, .dropdown-menu
    background-color: $navigation-background-color

#search-filters-and-results-count > .navbar-nav
  border-color: $navigation-border-color

#footer-wrapper
  background-color: $footer-background-color
  li a
    border-color: $footer-border-color

#search, #serp-alert
  color: <%= render_affiliate_css_property_value(@css_hash, :description_text_color) %>

  > div, .content-block-item
    border-color: $page-background-color

  a, #spelling-suggestion a
    color: <%= render_affiliate_css_property_value(@css_hash, :title_link_color) %>

    &:visited
      color: <%= render_affiliate_css_property_value(@css_hash, :visited_title_link_color) %>

  .content-block-item-footer
    a:visited
      color: <%= render_affiliate_css_property_value(@css_hash, :title_link_color) %>

  .result
    .uext_type
      color: <%= render_affiliate_css_property_value(@css_hash, :title_link_color) %>

    .content-host, .feed-name, .url
      color: <%= render_affiliate_css_property_value(@css_hash, :url_link_color) %>

      &:visited
        color: <%= render_affiliate_css_property_value(@css_hash, :url_link_color) %>

#related-searches a, #search .pagination a
  &:hover, &:visited
    color: <%= render_affiliate_css_property_value(@css_hash, :title_link_color) %>
