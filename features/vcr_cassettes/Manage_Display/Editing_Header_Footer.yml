---
http_interactions:
- request:
    method: put
    uri: https://<AWS_IMAGE_BUCKET_BUCKET>.s3.amazonaws.com/test/site/1057602728/header_tagline_logo/1631031327/original/mini_logo.png
    body:
      encoding: ASCII-8BIT
      base64_string: |
        iVBORw0KGgoAAAANSUhEUgAAABYAAAAZCAQAAACf6xZlAAAAGXRFWHRTb2Z0
        d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAZFJREFUGBmNwU1oDQAcAPD/
        PlrKPmSzw9R2mraDj7JWWsqSJZMhJDsoivemXJgoioOGpu1gB60cdqF2WUk4
        rRltlFLKDoRpBzVqeW8bZfv5KLX1ZtvvF7EsrquL5bHfTwdiafJ1oU+eW7E4
        DUZNabVKr1T8n0LdGFCp3keTDsb/aDTmmxYrdZo1rCoWplgPHiq3zVvftSqw
        IxZil8++OqpQF4ZVqfXG1chkixn3lWrwybRWBTrNGFAUmfQbkacdgyrVe2/K
        WTmRSQUSGtGmyG30q4yFOWXWGnd9kO25lBOyYj4VEvapUeaJp7KM61CLpsjk
        mX8m1MmV0u4IymI+zbqdUWyd7ZoUR2iTVq7PqNyYzw33/DDhmrL4y16cVoM9
        kUmpy76Y1qEkwgrjXkZ4Z0RSt8faVcVc8l2UlnJengfSElokbbXTC3+8sinm
        slYvXtusWhJD8Zsch1xQHZkcljJptY3SjsVS3DHkkh4lsThZzrkpgfWxFFek
        ZTuJR5picQbN2CBX0nFFsTjNUsbsjgX9AtZabdMhQhzuAAAAAElFTkSuQmCC
    headers:
      Content-Type:
      - image/png
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.11.632 ruby/2.6.6 x86_64-darwin19 resources
      X-Amz-Acl:
      - public-read
      Expect:
      - 100-continue
      Content-Md5:
      - 6uH1VCcGpag797A21L81cg==
      X-Amz-Date:
      - 20210907T161527Z
      Host:
      - "<AWS_IMAGE_BUCKET_BUCKET>.s3.amazonaws.com"
      X-Amz-Content-Sha256:
      - bad02614f4d0c320d62b980725576149477c9b7de73ba5aa082711dc82d3b32e
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_IMAGE_BUCKET_ACCESS_KEY_ID>/20210907/<AWS_IMAGE_BUCKET_S3_REGION>/s3/aws4_request,
        SignedHeaders=content-md5;content-type;host;x-amz-acl;x-amz-content-sha256;x-amz-date,
        Signature=b4649f0d409541d81bb254c0917ccab356448b4ba1e772f34f8c0f9b3b276f80
      Content-Length:
      - '495'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - 2Hniqsfu246Kng3rBcts2R9QHPgIbwbP9KFtKCriWVqbbQERgNwAcOujJpx2xQj/qxBYS5RIGoQ=
      X-Amz-Request-Id:
      - D6R2GK354DC2DSKX
      Date:
      - Tue, 07 Sep 2021 16:15:28 GMT
      Etag:
      - '"eae1f5542706a5a83bf7b036d4bf3572"'
      Server:
      - AmazonS3
      Content-Length:
      - '0'
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Tue, 07 Sep 2021 16:15:27 GMT
- request:
    method: put
    uri: https://<AWS_IMAGE_BUCKET_BUCKET>.s3.amazonaws.com/test/site/1057602728/header_tagline_logo/1631031327/large/mini_logo.png
    body:
      encoding: ASCII-8BIT
      base64_string: |
        iVBORw0KGgoAAAANSUhEUgAAABYAAAAZCAQAAACf6xZlAAAABGdBTUEAALGP
        C/xhBQAAAAJiS0dEAP+Hj8y/AAAAB3RJTUUH5QkHEA8bC0EMCgAAAAFvck5U
        Ac+id5oAAAG2SURBVDjLjdFPaA5wGAfw593Wmmwj86em5uLVVkJZK6SMLJn8
        C6kdlAPblAPeohw4aGi1HSxpcXBA7bKSf6f5V4aUWnEgTDuoTeF9Z8h8XCbt
        9W723H6/5/N7+j19I6ZUzlg1NRm2+2nHVGCxDnQrdO5/tE6/r1Jm6pKeDJbq
        xD1Jtd4ZtnNiWm/AF82ma/dLr8qJYJnLuKXCGq98k1JifW660Qcf7VGqA70q
        1XjhVC66wqjr5qrz3oiUEu1G3TMjF+7xUqFWPJBU642vjsjPRRegUT1azHAB
        PZITrXbAL3Nc9Vaex9L2Sfw7r9E21crd91DCoDY12DLeFURExJVYOXb+HPWR
        H0UxGgsj4mn21AadDiuzyDpblEVokVGhW7+CbHzWNd99clr52M1WHFSNzbnW
        muuEISPazI5QZNCzCK+91KTTHa1ZYSt2XEbaUYVuyGjUrMlqGzwBzy0b/2C+
        LvRZrkoTHkVEyLfLMVW5vrRb2rBZlsrYO76XyMEvRVXcjGQcSgxNiiUiFfPi
        VZyPJYm+mLyclJFnP25n5/cnwb+1NqbF4rgYefEj7v5vcoO0AZtyd38D5zlN
        AMd7TrMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjEtMDktMDdUMTY6MTU6Mjcr
        MDA6MDClwXRGAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIxLTA5LTA3VDE2OjE1
        OjI3KzAwOjAw1JzM+gAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFk
        eXHJZTwAAAAASUVORK5CYII=
    headers:
      Content-Type:
      - image/png
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.11.632 ruby/2.6.6 x86_64-darwin19 resources
      X-Amz-Acl:
      - public-read
      Expect:
      - 100-continue
      Content-Md5:
      - khJf1XzbuehfA2JULc1Hyg==
      X-Amz-Date:
      - 20210907T161527Z
      Host:
      - "<AWS_IMAGE_BUCKET_BUCKET>.s3.amazonaws.com"
      X-Amz-Content-Sha256:
      - f9ae3a8cc20b38080aca7e333ec1d9c6db24bfa25695610415b3960c47678f7d
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_IMAGE_BUCKET_ACCESS_KEY_ID>/20210907/<AWS_IMAGE_BUCKET_S3_REGION>/s3/aws4_request,
        SignedHeaders=content-md5;content-type;host;x-amz-acl;x-amz-content-sha256;x-amz-date,
        Signature=22a5ed1ec0c159df4ae003aeb57d427240560546f3e560871f3d009d94797ebc
      Content-Length:
      - '692'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - WvfuNXZmkEVx2FX7GpQRrLI5VvBW+k4jAEtUxo5N54L7c8GUV12L1Ph4S4c1Uey+kV/38B7Re4w=
      X-Amz-Request-Id:
      - XDEGKVTS82JFV0RG
      Date:
      - Tue, 07 Sep 2021 16:15:29 GMT
      Etag:
      - '"92125fd57cdbb9e85f0362542dcd47ca"'
      Server:
      - AmazonS3
      Content-Length:
      - '0'
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Tue, 07 Sep 2021 16:15:28 GMT
- request:
    method: head
    uri: https://<AWS_IMAGE_BUCKET_BUCKET>.s3.amazonaws.com/test/site/1057602728/header_tagline_logo/1631031327/original/mini_logo.png
    body:
      encoding: UTF-8
      string: ''
    headers:
      Content-Type:
      - ''
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.11.632 ruby/2.6.6 x86_64-darwin19 resources
      X-Amz-Date:
      - 20210907T161529Z
      Host:
      - "<AWS_IMAGE_BUCKET_BUCKET>.s3.amazonaws.com"
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_IMAGE_BUCKET_ACCESS_KEY_ID>/20210907/<AWS_IMAGE_BUCKET_S3_REGION>/s3/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=ecad6eeb6a34e631984574c65b3247bc24f3cd6916a888397861e1dfb4281cdb
      Content-Length:
      - '0'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - kVfd4AtKH21hrrhAjh6ikyMRWyFJ58xnyGxTnNjHktaMj2Tt4hdCAHwtCj6DwViXxRCtEkcjj8c=
      X-Amz-Request-Id:
      - 8F7B48FM8DWK0VWQ
      Date:
      - Tue, 07 Sep 2021 16:15:30 GMT
      Last-Modified:
      - Tue, 07 Sep 2021 16:15:28 GMT
      Etag:
      - '"eae1f5542706a5a83bf7b036d4bf3572"'
      Accept-Ranges:
      - bytes
      Content-Type:
      - image/png
      Server:
      - AmazonS3
      Content-Length:
      - '495'
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Tue, 07 Sep 2021 16:15:29 GMT
- request:
    method: head
    uri: https://<AWS_IMAGE_BUCKET_BUCKET>.s3.amazonaws.com/test/site/1057602728/header_tagline_logo/1631031327/large/mini_logo.png
    body:
      encoding: UTF-8
      string: ''
    headers:
      Content-Type:
      - ''
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.11.632 ruby/2.6.6 x86_64-darwin19 resources
      X-Amz-Date:
      - 20210907T161529Z
      Host:
      - "<AWS_IMAGE_BUCKET_BUCKET>.s3.amazonaws.com"
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_IMAGE_BUCKET_ACCESS_KEY_ID>/20210907/<AWS_IMAGE_BUCKET_S3_REGION>/s3/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=ee629e435f39c7ff418cd8219b7947893b4cae0e68ff1f4420540ef66ee2396e
      Content-Length:
      - '0'
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Amz-Id-2:
      - 6Tv2sBe/aoqeWsZc5O7p0yiSzWz9ApkPEVNdweS/PAEIHjK/R09sNCci8RgGPHqMmM2S7p60nv4=
      X-Amz-Request-Id:
      - 8F79KPH9YTSX4NWS
      Date:
      - Tue, 07 Sep 2021 16:15:30 GMT
      Last-Modified:
      - Tue, 07 Sep 2021 16:15:29 GMT
      Etag:
      - '"92125fd57cdbb9e85f0362542dcd47ca"'
      Accept-Ranges:
      - bytes
      Content-Type:
      - image/png
      Server:
      - AmazonS3
      Content-Length:
      - '692'
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Tue, 07 Sep 2021 16:15:29 GMT
- request:
    method: delete
    uri: https://<AWS_IMAGE_BUCKET_BUCKET>.s3.amazonaws.com/test/site/1057602728/header_tagline_logo/1631031327/original/mini_logo.png
    body:
      encoding: UTF-8
      string: ''
    headers:
      Content-Type:
      - ''
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.11.632 ruby/2.6.6 x86_64-darwin19 resources
      X-Amz-Date:
      - 20210907T161529Z
      Host:
      - "<AWS_IMAGE_BUCKET_BUCKET>.s3.amazonaws.com"
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_IMAGE_BUCKET_ACCESS_KEY_ID>/20210907/<AWS_IMAGE_BUCKET_S3_REGION>/s3/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=5d659f7146007ec3e94fcea92797d6c5355ed8ff8df34646da3a9236663dc5df
      Content-Length:
      - '0'
      Accept:
      - "*/*"
  response:
    status:
      code: 204
      message: No Content
    headers:
      X-Amz-Id-2:
      - xzNuUQ/yXJRVh937JkXuBtoAu4P7kw3nGDMtyI0fupu55QCuom0KeH+kw8HaeRCWt+t5+zbq91U=
      X-Amz-Request-Id:
      - 8F76FYH4S2X33TY6
      Date:
      - Tue, 07 Sep 2021 16:15:30 GMT
      Server:
      - AmazonS3
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Tue, 07 Sep 2021 16:15:29 GMT
- request:
    method: delete
    uri: https://<AWS_IMAGE_BUCKET_BUCKET>.s3.amazonaws.com/test/site/1057602728/header_tagline_logo/1631031327/large/mini_logo.png
    body:
      encoding: UTF-8
      string: ''
    headers:
      Content-Type:
      - ''
      Accept-Encoding:
      - ''
      User-Agent:
      - aws-sdk-ruby2/2.11.632 ruby/2.6.6 x86_64-darwin19 resources
      X-Amz-Date:
      - 20210907T161529Z
      Host:
      - "<AWS_IMAGE_BUCKET_BUCKET>.s3.amazonaws.com"
      X-Amz-Content-Sha256:
      - e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      Authorization:
      - AWS4-HMAC-SHA256 Credential=<AWS_IMAGE_BUCKET_ACCESS_KEY_ID>/20210907/<AWS_IMAGE_BUCKET_S3_REGION>/s3/aws4_request,
        SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=690d688f4fbb5d504fea4037646935e4f2f200b6f65ecfa45e2f228f4932a049
      Content-Length:
      - '0'
      Accept:
      - "*/*"
  response:
    status:
      code: 204
      message: No Content
    headers:
      X-Amz-Id-2:
      - 37XTL3tDMIes6JO17DuAghzE8ppNGpkazzMHTdojIQ4F4pf4BayR4gT3igDhW2aqiSbu3n3LiO0=
      X-Amz-Request-Id:
      - 5CR2TK9EA01X8R2B
      Date:
      - Tue, 07 Sep 2021 16:15:31 GMT
      Server:
      - AmazonS3
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Tue, 07 Sep 2021 16:15:30 GMT
- request:
    method: post
    uri: https://api.datadoghq.com/api/v1/events?api_key=<DATADOG_API_KEY>
    body:
      encoding: UTF-8
      string: '{"msg_text":"%%%\n### **Request**\n**URL:** http://127.0.0.1:61138/sites/1073485086/header_and_footer\n**HTTP
        Method:** PATCH\n**IP Address:** 127.0.0.1\n**Parameters:** {\"_method\"=>\"patch\",
        \"commit\"=>\"Save\", \"site\"=>{\"header_tagline\"=>\"Office website of the
        Awesome Agency\", \"header_tagline_url\"=>\"http://awesomeagency.gov\", \"header_tagline_logo\"=>#<ActionDispatch::Http::UploadedFile:0x000000013a87aa10
        @tempfile=#<Tempfile:/var/folders/t3/hxs04khx25bf9yffft0klndh0000gn/T/RackMultipart20240912-96414-zr3hrf.png>,
        @content_type=\"image/png\", @original_filename=\"mini_logo.png\", @headers=\"Content-Disposition:
        form-data; name=\\\"site[header_tagline_logo]\\\"; filename=\\\"mini_logo.png\\\"\\r\\nContent-Type:
        image/png\\r\\n\">, \"css_property_hash\"=>{\"menu_button_alignment\"=>\"left\"},
        \"managed_header_links_attributes\"=>{\"0\"=>{\"title\"=>\"News\", \"position\"=>\"0\",
        \"url\"=>\"news.agency.gov\"}, \"1\"=>{\"title\"=>\"Blog\", \"position\"=>\"1\",
        \"url\"=>\"blog.agency.gov\"}}, \"managed_footer_links_attributes\"=>{\"0\"=>{\"title\"=>\"Contact\",
        \"position\"=>\"0\", \"url\"=>\"mailto:contact@agency.gov\"}, \"1\"=>{\"title\"=>\"Terms
        of Service\", \"position\"=>\"1\", \"url\"=>\"tos.agency.gov\"}}}, \"controller\"=>\"sites/header_and_footers\",
        \"action\"=>\"update\", \"site_id\"=>\"1073485086\"}\n**Timestamp:** 2024-09-12
        17:53:43 UTC\n**Server:** Bhaviths-MBP-2.attlocal.net\n**Rails root:** /Users/bhavith/workspace/search-gov\n**Process:**
        96414\n___\n### **Session**\n**Data:** {\"id_token\"=>\"mock_id_token\", \"user_credentials\"=>\"e037d4039bfa87098b01e979a462700fd03a1c7475c9ed60dd6a54a2645a5866aad34234fbf6cb584e90208b4cfac47dce66eac9143edad00370b90a0a22f898\",
        \"user_credentials_id\"=>1033898155}\n___\n### **Backtrace**\n````\napp/controllers/sites/header_and_footers_controller.rb:21:in
        `update''\nlib/middlewares/filtered_jsonp.rb:12:in `call''\nlib/middlewares/adjust_client_ip.rb:9:in
        `call''\n````\n___\n%%%","date_happened":1726163623,"msg_title":"header_and_footers
        update (Paperclip::Errors::CommandNotFoundError) \"Could not run the `identify`
        command. Please instal...","priority":"normal","parent":null,"tags":[],"aggregation_key":"[\"header_and_footers
        update (Paperclip::Errors::CommandNotFoundError) \\\"Could not run the `identify`
        command. Please instal...\"]","alert_type":"error","event_type":null,"source_type_name":null,"title":"header_and_footers
        update (Paperclip::Errors::CommandNotFoundError) \"Could not run the `identify`
        co","text":"%%%\n### **Request**\n**URL:** http://127.0.0.1:61138/sites/1073485086/header_and_footer\n**HTTP
        Method:** PATCH\n**IP Address:** 127.0.0.1\n**Parameters:** {\"_method\"=>\"patch\",
        \"commit\"=>\"Save\", \"site\"=>{\"header_tagline\"=>\"Office website of the
        Awesome Agency\", \"header_tagline_url\"=>\"http://awesomeagency.gov\", \"header_tagline_logo\"=>#<ActionDispatch::Http::UploadedFile:0x000000013a87aa10
        @tempfile=#<Tempfile:/var/folders/t3/hxs04khx25bf9yffft0klndh0000gn/T/RackMultipart20240912-96414-zr3hrf.png>,
        @content_type=\"image/png\", @original_filename=\"mini_logo.png\", @headers=\"Content-Disposition:
        form-data; name=\\\"site[header_tagline_logo]\\\"; filename=\\\"mini_logo.png\\\"\\r\\nContent-Type:
        image/png\\r\\n\">, \"css_property_hash\"=>{\"menu_button_alignment\"=>\"left\"},
        \"managed_header_links_attributes\"=>{\"0\"=>{\"title\"=>\"News\", \"position\"=>\"0\",
        \"url\"=>\"news.agency.gov\"}, \"1\"=>{\"title\"=>\"Blog\", \"position\"=>\"1\",
        \"url\"=>\"blog.agency.gov\"}}, \"managed_footer_links_attributes\"=>{\"0\"=>{\"title\"=>\"Contact\",
        \"position\"=>\"0\", \"url\"=>\"mailto:contact@agency.gov\"}, \"1\"=>{\"title\"=>\"Terms
        of Service\", \"position\"=>\"1\", \"url\"=>\"tos.agency.gov\"}}}, \"controller\"=>\"sites/header_and_footers\",
        \"action\"=>\"update\", \"site_id\"=>\"1073485086\"}\n**Timestamp:** 2024-09-12
        17:53:43 UTC\n**Server:** Bhaviths-MBP-2.attlocal.net\n**Rails root:** /Users/bhavith/workspace/search-gov\n**Process:**
        96414\n___\n### **Session**\n**Data:** {\"id_token\"=>\"mock_id_token\", \"user_credentials\"=>\"e037d4039bfa87098b01e979a462700fd03a1c7475c9ed60dd6a54a2645a5866aad34234fbf6cb584e90208b4cfac47dce66eac9143edad00370b90a0a22f898\",
        \"user_credentials_id\"=>1033898155}\n___\n### **Backtrace**\n````\napp/controllers/sites/header_and_footers_controller.rb:21:in
        `update''\nlib/middlewares/filtered_jsonp.rb:12:in `call''\nlib/middlewares/adjust_client_ip.rb:9:in
        `call''\n````\n___\n%%%","host":"Bhaviths-MBP-2.attlocal.net","device":null}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - dogapi-rb/1.45.0 (ruby 3.3.4; os darwin22; arch x86_64)
      Content-Type:
      - application/json
  response:
    status:
      code: 403
      message: Forbidden
    headers:
      Date:
      - Thu, 12 Sep 2024 17:53:43 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '169'
      Connection:
      - keep-alive
      X-Content-Type-Options:
      - nosniff
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
    body:
      encoding: UTF-8
      string: '{"status":"error","code":403,"errors":["Forbidden"],"statuspage":"http://status.datadoghq.com","twitter":"http://twitter.com/datadogops","email":"support@datadoghq.com"}'
  recorded_at: Thu, 12 Sep 2024 17:53:43 GMT
recorded_with: VCR 6.3.1
